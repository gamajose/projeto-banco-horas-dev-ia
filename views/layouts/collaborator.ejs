<!DOCTYPE html>
<html lang="pt-BR" class="bg-gray-100">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %> - Banco de Horas
    </title>
    <link rel="stylesheet" href="/css/output.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body class="font-sans">

    <div class="container mx-auto max-w-lg p-4">
        <header class="flex justify-between items-center py-4">
            <div class="text-left">
                <h1 class="text-2xl font-bold text-gray-800">Bom dia, <%= user.first_name || 'Colaborador' %>!</h1>
                <p class="text-sm text-gray-500">
                    <%= new Date().toLocaleDateString('pt-BR', { weekday: 'long' , year: 'numeric' , month: 'long' ,
                        day: 'numeric' }) %>
                </p>
            </div>
            <button id="open-menu-btn" class="text-gray-700">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </header>

        <nav class="my-6">
            <ul class="flex justify-around bg-white rounded-full shadow-md p-2">
                <li><a href="/meu-perfil" class="nav-item <%= activePage === 'home' ? 'active' : '' %>">Home</a></li>

                <li><a href="/profile/relatorio"
                        class="nav-item <%= activePage === 'gerenciar' ? 'active' : '' %>">Gerenciar Horas</a></li>

                <li><a href="/profile/folgas" class="nav-item <%= activePage === 'folga' ? 'active' : '' %>">Solicitar
                        Folga</a></li>
            </ul>
        </nav>

        <main>
            <%- body %>
        </main>
    </div>

    <div id="mobile-menu" class="fixed inset-0 flex z-40 hidden">
        <div id="menu-backdrop" class="fixed inset-0 bg-black opacity-25"></div>

        <div id="menu-content"
            class="relative flex-1 flex flex-col max-w-xs w-full bg-white transform -translate-x-full transition-transform duration-300 ease-in-out">
            <div class="absolute top-0 right-0 -mr-12 pt-2">
                <button id="close-menu-btn"
                    class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none">
                    <i class="fas fa-times text-white text-xl"></i>
                </button>
            </div>

            <div class="p-4">
                <h2 class="text-xl font-bold">Opções</h2>
            </div>
            <nav class="mt-5 flex-1">
                <a href="/profile/editar" class="block py-2 px-4 text-base text-gray-700 hover:bg-gray-100">Editar
                    Perfil</a>
                <a href="/auth/logout" class="block py-2 px-4 text-base text-gray-700 hover:bg-gray-100">Sair
                    (Logout)</a>
            </nav>
        </div>
    </div>

</body>

</html>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const menu = document.getElementById('mobile-menu');
        const menuContent = document.getElementById('menu-content');
        const openBtn = document.getElementById('open-menu-btn');
        const closeBtn = document.getElementById('close-menu-btn');
        const backdrop = document.getElementById('menu-backdrop');

        const openMenu = () => {
            menu.classList.remove('hidden');
            setTimeout(() => {
                menuContent.classList.remove('-translate-x-full');
            }, 10);
        };

        const closeMenu = () => {
            menuContent.classList.add('-translate-x-full');
            setTimeout(() => {
                menu.classList.add('hidden');
            }, 300);
        };

        openBtn.addEventListener('click', openMenu);
        closeBtn.addEventListener('click', closeMenu);
        backdrop.addEventListener('click', closeMenu);
    });
</script>